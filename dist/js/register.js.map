{"version":3,"file":"register.js","names":["document","getElementById","addEventListener","async","e","preventDefault","username","value","email","password","role","res","fetch","method","headers","body","JSON","stringify","data","json","ok","textContent","target","reset","message","next","URLSearchParams","location","search","get","href","err"],"sources":["register.js"],"mappings":"AAAAA,SAASC,eAAe,gBAAgBC,iBAAiB,SAAUC,MAAOC,IACtEA,EAAEC,iBAEF,MAAMC,EAAWN,SAASC,eAAe,YAAYM,MAC/CC,EAAQR,SAASC,eAAe,SAASM,MACzCE,EAAWT,SAASC,eAAe,YAAYM,MAC/CG,EAAOV,SAASC,eAAe,QAAQM,MAE7C,IACI,MAAMI,QAAYC,MAAM,kDAAmD,CACvEC,OAAQ,OACRC,QAAS,CACL,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAU,CAAEX,WAAUE,QAAOC,WAAUC,WAGhDQ,QAAaP,EAAIQ,OAEnBR,EAAIS,IACJpB,SAASC,eAAe,WAAWoB,YAAc,2DACjDrB,SAASC,eAAe,SAASoB,YAAc,GAC/CjB,EAAEkB,OAAOC,UAETvB,SAASC,eAAe,SAASoB,YAAcH,EAAKM,SAAW,mBAC/DxB,SAASC,eAAe,WAAWoB,YAAc,IAIrD,MACMI,EADS,IAAIC,gBAAgBC,SAASC,QACxBC,IAAI,QACxBF,SAASG,KAAOL,GAAQ,GAE5B,CAAE,MAAOM,GACL/B,SAASC,eAAe,SAASoB,YAAc,4BACnD","ignoreList":[],"sourcesContent":["document.getElementById(\"registerForm\").addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault()\r\n\r\n    const username = document.getElementById(\"username\").value\r\n    const email = document.getElementById(\"email\").value\r\n    const password = document.getElementById(\"password\").value\r\n    const role = document.getElementById(\"role\").value\r\n\r\n    try {\r\n        const res = await fetch(\"http://localhost:5000/api/auth/register-pending\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ username, email, password, role })\r\n        })\r\n\r\n        const data = await res.json()\r\n\r\n        if (res.ok) {\r\n            document.getElementById(\"success\").textContent = \"Wniosek rejestracyjny został przesłany do zatwierdzenia.\"\r\n            document.getElementById(\"error\").textContent = \"\"\r\n            e.target.reset()\r\n        } else {\r\n            document.getElementById(\"error\").textContent = data.message || \"Błąd rejestracji\"\r\n            document.getElementById(\"success\").textContent = \"\"\r\n        }\r\n\r\n        // po sukcesie logowania:\r\n        const params = new URLSearchParams(location.search)\r\n        const next = params.get(\"next\")\r\n        location.href = next || \"/\"\r\n\r\n    } catch (err) {\r\n        document.getElementById(\"error\").textContent = \"Błąd połączenia z serwerem\"\r\n    }\r\n})\r\n"]}